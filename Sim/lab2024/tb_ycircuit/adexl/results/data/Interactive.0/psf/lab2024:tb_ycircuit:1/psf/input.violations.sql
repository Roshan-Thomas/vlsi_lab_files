DROP VIEW IF EXISTS "AllChecksAsserts";
CREATE TEMP VIEW AllChecksAsserts AS SELECT "pointId" as "pointId", "Id" as "Id", "Checker Name" as "Checker Name", "Analysis Name" as "Analysis Name", 'DeviceChecks' as [Type], "Instance" as "Inst/Net", 'simInst' as [DesignObjectType], "StartTime (s)" as "Time (s)", "Duration (s)" as "Duration (s)" FROM DeviceChecks UNION ALL SELECT "pointId" as "pointId", "Id" as "Id", "Checker Name" as "Checker Name", "Analysis Name" as "Analysis Name", "Type" as "Type", "Inst/Net" as "Inst/Net", "DesignObjectType" as "DesignObjectType", "Time (s)" as "Time (s)", "Duration (s)" as "Duration (s)" FROM DynamicChecks UNION ALL SELECT "pointId" as "pointId", "Id" as "Id", "Checker Name" as "Checker Name", NULL as [Analysis Name], "Type" as [Type], "Inst/Net" as "Inst/Net", "DesignObjectType" as "DesignObjectType", NULL as [Time (s)], NULL as [Duration (s)] FROM StaticChecks UNION ALL SELECT "pointId" as "pointId", "Id" as "Id", "Checker Name" as "Checker Name", "Analysis Name" as "Analysis Name", "Type" as "Type", "Inst/Net" as "Inst/Net", "DesignObjectType" as "DesignObjectType", "Time (s)" as "Time (s)", "Duration (s)" as "Duration (s)" FROM Aux;

DROP VIEW IF EXISTS "AllChecksAssertsSummary";
CREATE TEMP VIEW AllChecksAssertsSummary AS SELECT pointId, min("Id") as Id, "Checker Name", "Type", "Analysis Name", "Inst/Net", "DesignObjectType", count(*) as Count, min("Time (s)") as "First Time (s)", sum("Duration (s)") as "Cumulative Duration (s)" FROM AllChecksAsserts GROUP BY pointId, "Checker Name", "Analysis Name", "Inst/Net", "DesignObjectType";

DROP VIEW IF EXISTS "AllChecksAssertsStatus";
CREATE TEMP VIEW AllChecksAssertsStatus AS SELECT checker.pointId as "pointId", checker.id as Id, checker.name as "Checker Name", (case WHEN AllChecksAssertsSummary.Count IS NOT NULL THEN AllChecksAssertsSummary."Type" ELSE checker.primitive END) as "Type", (case WHEN AllChecksAssertsSummary.Count IS NOT NULL THEN AllChecksAssertsSummary."Analysis Name" ELSE  "" END) as "Analysis Name", (case WHEN AllChecksAssertsSummary.Count IS NOT NULL THEN SUM(AllChecksAssertsSummary.Count) ELSE 0 END) as Count, (case WHEN AllChecksAssertsSummary.Count IS NOT NULL THEN AllChecksAssertsSummary."Inst/Net" ELSE  "" END) as "Inst/Net", (case WHEN AllChecksAssertsSummary.Count IS NOT NULL THEN AllChecksAssertsSummary."DesignObjectType" ELSE "" END) as "DesignObjectType" FROM checker LEFT JOIN AllChecksAssertsSummary ON AllChecksAssertsSummary.pointId = checker.pointId AND AllChecksAssertsSummary."Checker Name" = checker.name GROUP BY checker.pointId, checker.name, "Analysis Name";

